# @file   myGDBinit0
# @author Peeter Joot <peeter.joot@lzlabs.com>
# @brief  Useful batch debug commands for gdb.
#
# @section Copyright
#
#   Copyright Notice:
#
#   Copyright (C) 2019 LzLabs GmbH
#   All Rights Reserved.
#
#   This product and associated documentation includes confidential,
#   proprietary and trade secret information and code.  No part of
#   this product or associated documentation may be modified,
#   distributed, or copied in any form except as expressly permitted
#   by the license agreement pertaining to this product.
#
# @section License
#
#   This file is Object Code Only and is NOT to be distributed in source form.
#
# @section Description
#
#   Signal handling and other related SDM debug setup.
#
# @section Source
#
#   Information in this file is original.
#

handle SIGSEGV pass nostop noprint
#break nogdb_sigtrap
#break gdb_active
# from:
#handle SIGSEGV pass stop print
#handle SIGTRAP nostop
handle SIGTSTP pass nostop noprint

# don't do this by default anymore.  It messes up the python pretty-printers.  toggle this with the 'ebc' and 'asc' macros instead:
#set target-charset EBCDIC-US
#break main
set breakpoint pending on
break __libc_start_main

set python print-stack full
source /opt/lzlabs/debug/gdb/sdm.py
set print pretty on
source /opt/lzlabs/debug/gdb/macros/lpe.gdb
source /opt/lzlabs/debug/gdb/macros/bswap.gdb
source /opt/lzlabs/debug/gdb/macros/ebcdic.gdb

